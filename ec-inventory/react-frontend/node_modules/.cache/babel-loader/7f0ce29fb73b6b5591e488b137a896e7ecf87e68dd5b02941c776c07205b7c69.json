{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\folio\\\\ec-inventory\\\\react-frontend\\\\src\\\\components\\\\ProductList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductList() {\n  _s();\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:8080/api/products').then(res => {\n      if (!res.ok) {\n        throw new Error('データ取得失敗');\n      }\n      return res.json();\n    }).then(data => {\n      setProducts(data);\n    }).catch(err => {\n      console.error(err);\n    });\n  }, []);\n  const addToCart = productId => {\n    let currentCart = localStorage.getItem('cart');\n    let cartData = currentCart ? JSON.parse(currentCart) : [];\n    const existingIndex = cartData.findIndex(item => item.productId === productId);\n    if (existingIndex >= 0) {\n      cartData[existingIndex].quantity += 1;\n    } else {\n      cartData.push({\n        productId,\n        quantity: 1\n      });\n    }\n    localStorage.setItem('cart', JSON.stringify(cartData));\n    alert('カートに追加: ' + productId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u5546\\u54C1\\u4E00\\u89A7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: products.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [p.name, \" (\\u5728\\u5EAB: \", p.stock, \")\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addToCart(p.id),\n          children: \"\\u30AB\\u30FC\\u30C8\\u306B\\u5165\\u308C\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this)]\n      }, p.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductList, \"f86L6rLANGURv6GE6gupp7+oOp4=\");\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","ProductList","_s","products","setProducts","fetch","then","res","ok","Error","json","data","catch","err","console","error","addToCart","productId","currentCart","localStorage","getItem","cartData","JSON","parse","existingIndex","findIndex","item","quantity","push","setItem","stringify","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","map","p","name","stock","onClick","id","_c","$RefreshReg$"],"sources":["C:/project/folio/ec-inventory/react-frontend/src/components/ProductList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Product } from '../types/types';\r\n\r\nfunction ProductList() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetch('http://localhost:8080/api/products')\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          throw new Error('データ取得失敗');\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data: Product[]) => {\r\n        setProducts(data);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }, []);\r\n\r\n  const addToCart = (productId: number) => {\r\n    let currentCart = localStorage.getItem('cart');\r\n    let cartData: { productId: number; quantity: number }[] = currentCart\r\n      ? JSON.parse(currentCart)\r\n      : [];\r\n\r\n    const existingIndex = cartData.findIndex((item) => item.productId === productId);\r\n    if (existingIndex >= 0) {\r\n      cartData[existingIndex].quantity += 1;\r\n    } else {\r\n      cartData.push({ productId, quantity: 1 });\r\n    }\r\n\r\n    localStorage.setItem('cart', JSON.stringify(cartData));\r\n    alert('カートに追加: ' + productId);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>商品一覧</h2>\r\n      <ul>\r\n        {products.map((p) => (\r\n          <li key={p.id}>\r\n            {p.name} (在庫: {p.stock}){' '}\r\n            <button onClick={() => addToCart(p.id)}>カートに入れる</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGnD,SAASC,WAAWA,CAAA,EAAG;EAAAC,EAAA;EACrB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGN,QAAQ,CAAY,EAAE,CAAC;EAEvDD,SAAS,CAAC,MAAM;IACdQ,KAAK,CAAC,oCAAoC,CAAC,CACxCC,IAAI,CAAEC,GAAG,IAAK;MACb,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;QACX,MAAM,IAAIC,KAAK,CAAC,SAAS,CAAC;MAC5B;MACA,OAAOF,GAAG,CAACG,IAAI,CAAC,CAAC;IACnB,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAe,IAAK;MACzBP,WAAW,CAACO,IAAI,CAAC;IACnB,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACpB,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,SAAS,GAAIC,SAAiB,IAAK;IACvC,IAAIC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC9C,IAAIC,QAAmD,GAAGH,WAAW,GACjEI,IAAI,CAACC,KAAK,CAACL,WAAW,CAAC,GACvB,EAAE;IAEN,MAAMM,aAAa,GAAGH,QAAQ,CAACI,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACT,SAAS,KAAKA,SAAS,CAAC;IAChF,IAAIO,aAAa,IAAI,CAAC,EAAE;MACtBH,QAAQ,CAACG,aAAa,CAAC,CAACG,QAAQ,IAAI,CAAC;IACvC,CAAC,MAAM;MACLN,QAAQ,CAACO,IAAI,CAAC;QAAEX,SAAS;QAAEU,QAAQ,EAAE;MAAE,CAAC,CAAC;IAC3C;IAEAR,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEP,IAAI,CAACQ,SAAS,CAACT,QAAQ,CAAC,CAAC;IACtDU,KAAK,CAAC,UAAU,GAAGd,SAAS,CAAC;EAC/B,CAAC;EAED,oBACEjB,OAAA;IAAAgC,QAAA,gBACEhC,OAAA;MAAAgC,QAAA,EAAI;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACbpC,OAAA;MAAAgC,QAAA,EACG7B,QAAQ,CAACkC,GAAG,CAAEC,CAAC,iBACdtC,OAAA;QAAAgC,QAAA,GACGM,CAAC,CAACC,IAAI,EAAC,kBAAM,EAACD,CAAC,CAACE,KAAK,EAAC,GAAC,EAAC,GAAG,eAC5BxC,OAAA;UAAQyC,OAAO,EAAEA,CAAA,KAAMzB,SAAS,CAACsB,CAAC,CAACI,EAAE,CAAE;UAAAV,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GAFjDE,CAAC,CAACI,EAAE;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGT,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEV;AAAClC,EAAA,CAjDQD,WAAW;AAAA0C,EAAA,GAAX1C,WAAW;AAmDpB,eAAeA,WAAW;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}